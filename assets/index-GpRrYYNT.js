(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function d(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=d(e);fetch(e.href,n)}})();const M=document.body;function k(){const t=document.createElement("div");t.classList.add("heart"),t.innerHTML="â¤ï¸";const s=["â¤ï¸","ðŸ’–","ðŸ’","ðŸ’•","ðŸŒ¹"];t.innerHTML=s[Math.floor(Math.random()*s.length)],t.style.left=Math.random()*100+"vw",t.style.animationDuration=Math.random()*2+3+"s",M.appendChild(t),setTimeout(()=>{t.remove()},5e3)}setInterval(k,300);const L=document.getElementById("bg-music"),a=document.getElementById("mute-btn"),w=document.getElementById("music-control"),S=document.getElementById("stage-greeting"),E=document.getElementById("stage-pole"),v=document.getElementById("stage-yin"),p=document.getElementById("stage-intro"),B=document.getElementById("stage-boxes"),T=document.getElementById("btn-greeting-next"),r=document.getElementById("btn-pole-start"),I=document.getElementById("btn-pole-next"),C=document.getElementById("pole-gifs-container"),m=document.getElementById("btn-yin-reveal"),b=document.getElementById("btn-yin-next"),P=document.getElementById("yin-static"),Y=document.getElementById("yin-gif"),q=document.getElementById("start-btn"),x=document.getElementById("next-btn"),u=document.getElementById("box-message"),y=document.querySelectorAll(".box");let c=!1;a.addEventListener("click",()=>{c=!c,L.muted=c,a.textContent=c?"ðŸ”‡":"ðŸ”Š"});T.addEventListener("click",()=>{S.classList.add("hidden"),E.classList.remove("hidden"),L.play().catch(t=>console.log("Audio play failed (user interaction needed?):",t)),w.classList.remove("hidden")});r.addEventListener("click",()=>{r.classList.add("hidden"),C.classList.remove("hidden"),setTimeout(()=>{I.classList.remove("hidden")},6e3)});I.addEventListener("click",()=>{E.classList.add("hidden"),v.classList.remove("hidden")});m.addEventListener("click",()=>{m.classList.add("hidden"),P.classList.add("hidden"),Y.classList.remove("hidden"),setTimeout(()=>{b.classList.remove("hidden")},5e3)});b.addEventListener("click",()=>{v.classList.add("hidden"),p.classList.remove("hidden")});q.addEventListener("click",()=>{p.classList.add("hidden"),B.classList.remove("hidden")});const g=["You're the sweetest! ðŸ¬","You make me smile! ðŸ˜Š","I adore you! ðŸ’–"];y.forEach((t,s)=>{t.addEventListener("click",()=>{if(t.classList.contains("opened"))return;y.forEach(o=>o.style.pointerEvents="none"),t.classList.add("opened"),t.textContent="â¤ï¸";const d=g[Math.floor(Math.random()*g.length)];u.textContent=d,u.classList.remove("hidden"),x.classList.remove("hidden")})});x.addEventListener("click",()=>{B.classList.add("hidden"),document.getElementById("stage-ask").classList.remove("hidden")});const h=document.getElementById("envelope-container"),N=document.getElementById("letter-container"),l=document.querySelector(".no-btn"),O=document.querySelector(".yes-btn"),G=document.getElementById("letter-title"),A=document.getElementById("letter-cat"),H=document.getElementById("letter-buttons"),$=document.getElementById("final-text"),f=document.getElementById("stage-flowers");h.addEventListener("click",()=>{h.style.display="none",N.style.display="flex",setTimeout(()=>{document.querySelector(".letter-window").classList.add("open")},50)});l.addEventListener("mouseover",()=>{const d=Math.random()*150+50,o=Math.random()*Math.PI*2,e=Math.cos(o)*d,n=Math.sin(o)*d;l.style.transition="transform 0.3s ease",l.style.transform=`translate(${e}px, ${n}px)`});O.addEventListener("click",()=>{G.textContent="Yippeeee!",A.src="ask/cat_dance.gif",document.querySelector(".letter-window").classList.add("final"),H.style.display="none",$.style.display="block",setTimeout(()=>{document.getElementById("stage-ask").classList.add("hidden"),f.classList.remove("hidden"),f.src="flowers/flower.html"},2e3)});
